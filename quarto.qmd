# Reproducibility with Quarto

Quarto is a versatile publishing system that allows users to create high-quality documents, reports, websites (like this one!) and presentations using multiple programming languages like R, Python, and Julia. It combines the functionalities of various tools into a single platform, making it easier to produce reproducible and collaborative scientific content.

::: {.callout-note title="Learning Objectives"}
After completing this lesson learners will be able to:

-   Write code and text in a Quarto document
-   Identify components of a Quarto document
-   Compile Quarto documents into both HTML and PDF formats
-   Understand the difference between running code interactively, and rendering an entire new document.

:::

## Document structure

Quarto is an example of literate programming where the explanation of the
program (or analysis) logic is presented in a natural language (such as
English), with supporting pieces of code embedded in the document itself. Quarto combines normal text such as this sentence, code and the output from the code all in one file. It is similar to a scientific lab notebook where a scientist can write down their hypotheses, code to produce graphs and analysis results, and the discussion of those findings.

![A Quarto document with the extension .qmd (on the left), along with its
rendered version as HTML (on the right). Credit: Quarto
documentation.](https://quarto.org/docs/get-started/hello/images/rstudio-hello.png)

:::{.callout-warning icon=false appearance=minimal title = "Optional Video"}
[Getting started with Quarto](https://youtu.be/_f3latmOhew) 

:::

:::{.callout-tip title = "ðŸ‘‰ Open the Quarto tutorial file" icon=false}

1. Make sure you are in your Math 130 Project. (ref @sec-rproj) 
2. From the file pane, open the `_hello.qmd` quarto document 
3. Click "Render" at the top of this file.

:::

The ![](img/rstudio-render-button.png){width="25"} Render button in the RStudio IDE _compiles_ or _renders_ the file and opens a preview of the output with a single click or keyboard shortcut <kbd>SHIFT+COMMAND+K</kbd>.

![The Render button](img/rstudio-render.png)

## Components of a R Markdown document

Quarto files contains three types of content: a YAML header, code chunks, and markdown text.

## YAML Header

An YAML header is demarcated by three dashes (---) on top and bottom. R is pretty finicky about these three dashes. 

When rendered, the `title`, `"Hello, Quarto"`, will appear at the top of the rendered document with a larger font size than the rest of the document. The other two YAML fields denote that the output should be in `html format` and the document should open in the `visual editor` by default.

The basic syntax of YAML uses key-value pairs in the format `key: value`. Other YAML fields commonly found in headers of documents include metadata like `author` and `date`. 

:::{.callout-tip title = "ðŸ‘‰ Add your name" icon=false}

1. Add a line after the `title` for an `author` and put your name here. 
2. Click the "Source" button at the top left corner of the `Source` window. 
3. Render the document again. 

:::

**Visual vs Source mode**
RStudioâ€™s visual editor offers a [WYSIWYM](https://en.wikipedia.org/wiki/WYSIWYM) authoring experience for markdown formatting of text. Each view has it's benefits and drawbacks, and which you choose to use is purely a matter of personal preference. 

![The same Quarto document in the two modes of the RStudio editor: visual (on the left) and source (on the right). ](https://quarto.org/docs/get-started/hello/images/rstudio-source-visual.png)

## HERE HERE HERE----

## Code Chunks

-   Code chunks start with three back ticks (to the left of the 1) and an r in
    braces. Chunks close (end) with another three back ticks. Note the
    background color of this section has changed to a different shade. This
    helps you identify you have closed your code chunk properly.

-   You can insert code chunks by using the button in the top right of an RMD
    file (Insert --\> R), or by typing `CTRL+ALT+I`.

-   Only code goes in code chunks. That's why they're called **code** chunks.

    -   No normal text.
    -   All explanatory text goes outside a code chunk.

## Test your setup

Let's create your first markdown file!

1.  In R Studio go to *File* --\> *New File* --\> *R Markdown*
2.  Title this document **My First R Markdown Document**, then click OK.
3.  Click the small blue disk icon to save this file into your class folder.
4.  Save this file using the file name **test_markdown_document**.
    -   File names cannot have spaces or special characters.
    -   Do not specify the file type. It will be set automatically.
5.  Click the **KNIT** button (has the yarn ball next to it) to convert this
    file into HTML.
6.  Look at the HTML file that was created. You should be able to match the code
    with the resulting output.

This is what we mean by reproducible. If you make a change in the code document,
and re-knit (aka compile), your changes will be reflected in the generated
document.

If you are asked to install additional packages, go ahead and say yes. Then go
back to [lesson 02](02_setup_slides.html) and make sure you have all the
necessary packages listed.

## Make a change

Play around with modifying the text and the R code.

1.  Change the code from `summary(cars)` to `summary(iris)`.\
2.  Write a sentence below this code chunk. It could be "Hello world".
3.  Add a code chunk and type the equation `2+2` in the code chunk.
4.  Re-knit this document and observe your changes.

You are now ready to start the first assignment.

## Start Assignment 1

1.  **Right click** and select **save as** (or save target as) to download [\[HW
    1.Rmd\]](../hw/hw1.Rmd) code file to your class folder.
2.  Navigate to your class folder and double click to open this file in R Studio
    -   You might have to tell your computer what program to use.
    -   Do NOT open this file from your browser window.
3.  Double click on this file (from your class folder) to open it in R studio.
4.  This `.Rmd` file is a template for you to use to write your assignment.
    Write your answers directly into this document.
5.  After you answer each question, knit the file to ensure that your work is
    saved, and that your answers are being correctly displayed in the final
    document.

## Additional Resources

-   While the introductory video no longer works, there are additional lessons
    on using R Markdown at the following site:
    http://rmarkdown.rstudio.com/lesson-1.html
    -   Relevant portions in this tutorial are "How it works", "Code Chunks",
        and "Output Formats"
-   Gallery of the vast range of output and product types that you can create
    using R Markdown including PDF reports, interactive dashboards, maps,
    webpages like this one and more: https://rmarkdown.rstudio.com/gallery.html

## Install TinyTex

To convert your work into a professional looking PDF, or to write math symbols
in your homework, or you need a typesetting program called $\LaTeX$ (pronounced
"lay-tek" or "lah-tex"). It's a super neat program, but also nearly 4Gb. Too big
for our needs. That's where the `tinytex` package came from. we're going to use
it to install a lightweight version of $\LaTeX$. This will let us write math
equations in Markdown/Quarto, and create nice PDF's of your work.

In your console type the following and hit **Enter**

```         
tinytex::install_tinytex()
```

This may take a few minutes, but then you're good to go!

Test it out now by rendering ... <thing> to PDF by clicking on the down arrow
next to "Render" and choosing "PDF". \> FIXME
