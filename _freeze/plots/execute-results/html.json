{
  "hash": "cf4fdcdfd669cca0e69d4609a7f73d42",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexecute:\n  fig-height: 4\nformat: \n  html:\n    toc-depth: 3\n---\n\n\n\n# Creating Plots {#sec-plots1}\n\n![A fuzzy monster in a beret and scarf, critiquing their own column graph on a canvas in front of them while other assistant monsters (also in berets) carry over boxes full of elements that can be used to customize a graph (like themes and geometric shapes). In the background is a wall with framed data visualizations. Stylized text reads ‚Äúggplot2: build a data masterpiece.‚Äù](img/ggplot2.png)\n\n[Learn more about [ggplot2](https://ggplot2.tidyverse.org/)]{.aside}\n\n\n:::{.callout-warning icon=false appearance=minimal}\n<a href=\"https://media.csuchico.edu/media/MATH+130+Lecture+07A+Introduction/1_jlh6zm14\" target=\"_blank\">Introduction Video</a>\n:::\n\nVisualizing your data is hands down the most important thing you can learn to do. Seeing is critical to understanding. There are two audiences in mind when creating data visualizations: \n\n1. **For your eyes only:** These are quick and dirty plots, without annotation. Meant to be looked at once or twice.\n2. **To share with others:** These should have informative captions, axes labels, titles, colors as needed, etc. We'll see how to add these features throughout this course. \n\nThe functions from the `ggplot2` package, along with derivatives such as `ggpubr` and `sjPlot`, automatically do a lot of this work for you. While all of these can be made with base R plotting functions, we are intentionally choosing to highlight function that create good quality plots with very little code and are quite extensible and flexible.\n\n:::{.callout-note title = \"üéì Learning Objectives\" icon=false}\n\nAfter completing this lesson students will be able to create basic statistical data visualizations for one and two variables, using multiple approaches. \n\n:::\n\n:::{.callout-tip title = \"üëâ Prepare\" icon=false}\n\n1.  Open your Math 130 R Project.\n2.  Right click and \"save as\" this lessons [[Quarto notes file]](notes/plot_notes.qmd) and save into your `notes/Math130` folder.\n3.  In the *Files* pane, open this Quarto file and Render this file.\n\n:::\n\n\n## The syntax of `ggplot`\n\nThe reason we use the functions in `ggplot2` is for consistency in the structure of it's arguments. Here is a bare bones generic plotting function: \n\n```r\nggplot(data, aes(x=x, y=y, col=col, fill=fill, group=group)) +  geom_THING() \n```\n\n### Required arguments {.unnumbered}\n\n* `data`: What data set is this plot using? This is ALWAYS the first argument.\n* `aes()`: This is the _aesthetics_ of the plot. What variable is on the x, and what is on the y? Do you want to color by another variable, perhaps fill some box by the value of another variable, or group by a variable. \n* `geom_THING()`: Every plot has to have a geometry. What is the shape of the thing you want to plot? Do you want to plot point? Use `geom_points()`. Want to connect those points with a line? Use `geom_lines()`. We will see many varieties in this lesson. \n\n:::{.callout-note icon = false title = \"Meet the Penguins\"}\nThe `palmerpenguins` data contains size measurements for three penguin species observed on three islands in the Palmer Archipelago, Antarctica. \n[Horst AM, Hill AP, Gorman KB (2020). palmerpenguins: Palmer Archipelago (Antarctica) penguin data. R package version 0.1.0. <a href= \"https://allisonhorst.github.io/palmerpenguins/\">https://allisonhorst.github.io/palmerpenguins/</a>]{.aside}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2); library(sjPlot)    \nlibrary(ggpubr);  library(gtsummary)\npen <- palmerpenguins::penguins\n```\n:::\n\n\n\n:::\n\nI am loading the `penguins` data set out of the `palmerpenguins` package and storing it into a data frame named `pen`. We will be exploring variables such as species, body weight, the island and flipper lengths.  \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(pen)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntibble [344 √ó 8] (S3: tbl_df/tbl/data.frame)\n $ species          : Factor w/ 3 levels \"Adelie\",\"Chinstrap\",..: 1 1 1 1 1 1 1 1 1 1 ...\n $ island           : Factor w/ 3 levels \"Biscoe\",\"Dream\",..: 3 3 3 3 3 3 3 3 3 3 ...\n $ bill_length_mm   : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...\n $ bill_depth_mm    : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...\n $ flipper_length_mm: int [1:344] 181 186 195 NA 193 190 181 195 193 190 ...\n $ body_mass_g      : int [1:344] 3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...\n $ sex              : Factor w/ 2 levels \"female\",\"male\": 2 1 1 NA 1 2 1 2 NA NA ...\n $ year             : int [1:344] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...\n```\n\n\n:::\n:::\n\n\n\n\n\n## One categorical variable\n\nBoth Nominal and Ordinal data types can be visualized using tables, barcharts or pie charts.\n\n### Barchart\n\nA Barchart or barplot takes these frequencies, and draws bars along the X-axis where the height of the bars is determined by the frequencies seen in the table. \n\n::: {.panel-tabset}\n\n## `ggplot` \n\nUsing `ggplot2` with the `geom_bar()` geometry layer gives us actual wide bars, and better axis labels. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=species)) + geom_bar()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n## `sjPlot`\n\nUsing the `plot_frq` function from the `sjPlot` package builds on the `geom_bar()` type plot from `ggplot`, but adds frequncies and relative percentages on the plot. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_frq(pen, \"species\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\nThis single graph provides a lot of good information and is a recommended choice to use. \n\n:::\n\n### Pie charts\n\nA pie chart is a circular statistical graphic which is divided into slices to illustrate percentages out of a whole. While pie charts are very widely used in the media and business, there are some major drawbacks in that \"_humans are pretty bad at reading angles_\" [(Ref: The Issue with Pie Chart)](https://www.data-to-viz.com/caveat/pie.html)\n\nThe approach is to pipe the results of a `table` to a `pie` using base R. But the results are kinda \"meh\". \n\n:::: {.columns}\n::: {.column width=\"50%\"}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species) |> pie()\n```\n:::\n\n\n\n\nNicer pie charts using `ggplot2` or `ggpubr` functions require the data set to be pre-aggregated, and so we will come back to these approaches in a later lesson. \n\n:::\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n:::\n::::\n\n\n## One continuous variable\n\nWe will examine the chonkiness of the penguin (`body_mass_g`) using several types of appropriate visualizations including histograms, density plots, boxplots and violin plots. \n\n### Histogram\n\nRather than showing the value of each observation, we prefer to think of the value as belonging to a _bin_. The height of the bars in a histogram display the frequency of values that fall into those of those bins. \n\nSince the x-axis is continuous the bars touch. This is unlike the barchart that has a categorical x-axis, and vertical bars that are separated.\n\n::: {.panel-tabset}\n## `ggplot2`\n\nUsing the `ggplot2` package we can create a histogram by adding the layer `geom_histogram()`. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g)) + geom_histogram()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n\n## `ggpubr`\n\nIn contrast to `ggplot2`'s common starter code and different `geom`etries, the  `ggpubr` package uses specific functions for each type of plot. The `gghistogram` package makes a histogram very similar to the `ggplot2` default, but with a different theme applied (different appearance). Otherwise it's the same. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngghistogram(pen, x=\"body_mass_g\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\n:::{.callout-important title = \"Variables names in quotes\"}\nThis is a feature of `ggpubr` functions - variable names are always in quotes. \n:::\n\n::: \n\n### Density curves\n\nTo get a better idea of the true shape of the distribution we can \"smooth\" out the bins and create what's called a `density` plot or curve. Notice that the shape of this distribution curve is much... \"wigglier\" than the histogram may have implied. \n\n::: {.panel-tabset}\n## `ggplot2`\n\nWith `ggplot2` we use the `geom_density()` geometry to produce a nicer looking density plot with minimal additional code. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g)) + geom_density()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n\n## `ggpubr`\n\nAnd the `ggdensity` function from the `ggpubr` package creates a very similar density plot with a different default theme. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggdensity(pen, x=\"body_mass_g\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n\n:::\n\n### Boxplots\n\nAnother very common way to visualize the distribution of a continuous variable is using a boxplot. Boxplots are useful for quickly identifying where the bulk of your data lie. R specifically draws a \"modified\" boxplot where values that are considered outliers are plotted as dots. \n\n::: {.panel-tabset}\n## `ggplot2`\n\nWith `ggplot` you can create either a horizontal or vertical boxplot by specifying your numeric variable to be on either `x` or `y` . Notice the middle of the box is centered on 0, this is just a placeholder. This axis has no inherent meaning. \n\n\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g)) + geom_boxplot() # left\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(pen, aes(y=body_mass_g)) + geom_boxplot() # right\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-11-2.png){width=672}\n:::\n:::\n\n\n\n\n## `ggpubr`\nYou can also make a boxplot using the `ggbpxplot` function from the `ggpubr` package, however it you must specify that the quantitative variable is on the `y` axis otherwise it yells at you. \n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggboxplot(pen, y=\"body_mass_g\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggboxplot(pen, x=\"body_mass_g\")\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in (function (fun, data, x, y, combine = FALSE, merge = FALSE, color = \"black\", : argument \"y\" is missing, with no default\n```\n\n\n:::\n:::\n\n\n\n:::\n\n::::\n\n\n\n:::\n\n## Two continuous variables\n\nVisualizing the relationship between two continuous variables is done using a scatterplot. Let's compare the `flipper_length_mm` of a penguin to it's `body_mass_g`. \n\n::: {.panel-tabset}\n## `ggplot2`\n\nWith ggplot we specify both the x and y variables, and add `geom_point` geometry layer. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=flipper_length_mm, y=body_mass_g)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n\n\n## `ggpubr`\n\nThe `ggscatter` function creates a similar scatterplot. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggscatter(pen, x=\"flipper_length_mm\", y=\"body_mass_g\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n\n### Adding trend lines lines\n\nTwo most common trend lines added to a scatterplots are the \"best fit\" straight line and the \"loess\" (low-ess) smoother line. Adding a trend line to this plot using base R is a bit tricker, so we won't bother.   \n\n::: {.panel-tabset}\n## `ggplot2`\n\nA trend line can be added by adding a `geom_smooth()` layer.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=flipper_length_mm, y=body_mass_g)) + geom_point() + \n  geom_smooth() \n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n\nHere the point-wise confidence interval for this loess line is shown in grey. If you want to turn the confidence interval off, use `se=FALSE`. \n\nWe can add another `geom_smooth()` layer for the `lm` (linear model) line in blue, and the loess line (by not specifying a method) in red.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=flipper_length_mm, y=body_mass_g)) + geom_point() + \n  geom_smooth(se=FALSE, method=\"lm\", color=\"red\") + \n  geom_smooth(se=FALSE, color=\"blue\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n\n\n## `ggpubr`\n\nYou can add _either_ a linear model line _or_ a loess line to a `ggscatter` using the `add=` argument. \n\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggscatter(pen, x=\"flipper_length_mm\", y=\"body_mass_g\", add = \"loess\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggscatter(pen, x=\"flipper_length_mm\", y=\"body_mass_g\", add = \"reg.line\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-18-2.png){width=672}\n:::\n:::\n\n\n\n:::\n\n\n\n## One continuous vs. one categorical \n\nThe tactic here is to create an appropriate plot for a continuous variable, and then `fill` the geometric area or `color` the lines depending on the level of the categorical variable.  \n\n### Histograms\n\nNeither `fill`ing or `color`ing the histogram bars using `ggplot2` depending on the group work well due to the overlap. \n\n::: {.panel-tabset}\n## `ggplot2`\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell source-line-numbers='2'}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g, \n                   fill=species)) + \n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell source-line-numbers='2'}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g, \n                   color=species)) + \n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\n::::\n\n## `ggpubr`\n\nThe defaults for `gghistogram` automatically adjusts the transparency of the histogram bars to make the overlap a little less troublesome, but it doesn't always work well. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngghistogram(pen, x = \"body_mass_g\", fill = \"species\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n\n\n:::\n\n\n\n### Density curves\n\nSimilar to histograms, you can `fill` or `color` the density curves depending on the group. \n\n::: {.panel-tabset}\n## `ggplot-fill`\n\nIt's still hard to see some groups due to the overlap, so we adjust the transparency by applying a value to `alpha` inside the `geom_density` layer. Alpha is a measure of transparency, from 0=clear to 1=opaque.\n\n\n\n::: {.cell source-line-numbers='2'}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g, fill=species)) + \n  geom_density(alpha=.3)\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n\n\n## `ggplot-color`\n\nYou could also just color the lines and leave the fill alone. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g, color=species)) + geom_density()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n\n\n## `ggpubr`\n  \nThe `ggdensity` function also has `color` and `fill` options, where the transparency of the density plots are automatically handled. \n\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggdensity(pen, x=\"body_mass_g\", color = \"species\") # left\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggdensity(pen, x=\"body_mass_g\", fill = \"species\") # right\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-24-2.png){width=672}\n:::\n:::\n\n\n\n\n:::\n\n\n### Boxplots\n\nTo create grouped boxplots, put the continuous variable on one axis, and the categorical on the other axis. \n\n::: {.panel-tabset}\n## `ggplot2`\n\n\n\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g, y=species)) + geom_boxplot() # left\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(pen, aes(x=species, y=body_mass_g)) + geom_boxplot() # right\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-25-2.png){width=672}\n:::\n:::\n\n\n\n\nIf you want an additional color feature (and the corresponding legend), you can either `fill` or `color` the boxes by the same categorical variable. \n\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggplot(pen, aes(x=body_mass_g, y=species, fill = species)) + geom_boxplot() # left\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(pen, aes(x=species, y=body_mass_g, color = species)) + geom_boxplot() # right\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-26-2.png){width=672}\n:::\n:::\n\n\n\n\n\n## `ggpubr`\nNot much difference in the style between the `ggplot2` and `ggboxplot` versions. This method uses _slightly_ less code. \n\n\n\n::: {.cell layout-ncol=\"2\"}\n\n```{.r .cell-code}\nggboxplot(pen, y=\"body_mass_g\", fill = \"species\") # left\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggboxplot(pen, y=\"body_mass_g\", color = \"species\") # right\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-27-2.png){width=672}\n:::\n:::\n\n\n\n\n:::\n\n\n\n## Two categorical variables\n\nRecall from Section @sec-intro-tables that frequency tables are a common way to summarize categorical variables, and that both the frequency and relative percent are important summary numbers. Those percentages are even more important when comparing the joint distribution of two categorical variables. \n\nCross-tabs, cross-tabulations and two-way tables are different names for the same thing, and can be created by using the `table()` and `tbl_summary` functions. The values in each cell are the number of observations in that combination of characteristics. [We use this tactic in Chapter @sec-dm to check our recodes.]{.aside}\n\nLet's explore the relationship between the penguins sex and species. \n\n### Frequency and proportion tables\n\n::: {.panel-tabset}\n## base R\n\nThe first argument `species` specifies the levels that show on the rows, the second argument  `sex` specifies the columns. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$sex)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           \n            female male\n  Adelie        73   73\n  Chinstrap     34   34\n  Gentoo        58   61\n```\n\n\n:::\n:::\n\n\n\n\n## `tbl_summary`\n\nTo achieve the same ordering with species on the rows and sex on the columns, we `include=\"species\"` and set `by = \"sex\"`. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl_summary(pen, include = \"species\", by = \"sex\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"dvjublhdxv\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#dvjublhdxv table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#dvjublhdxv thead, #dvjublhdxv tbody, #dvjublhdxv tfoot, #dvjublhdxv tr, #dvjublhdxv td, #dvjublhdxv th {\n  border-style: none;\n}\n\n#dvjublhdxv p {\n  margin: 0;\n  padding: 0;\n}\n\n#dvjublhdxv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#dvjublhdxv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#dvjublhdxv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#dvjublhdxv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#dvjublhdxv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#dvjublhdxv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#dvjublhdxv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#dvjublhdxv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#dvjublhdxv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#dvjublhdxv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#dvjublhdxv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#dvjublhdxv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#dvjublhdxv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#dvjublhdxv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#dvjublhdxv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dvjublhdxv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#dvjublhdxv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#dvjublhdxv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#dvjublhdxv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dvjublhdxv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#dvjublhdxv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dvjublhdxv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#dvjublhdxv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dvjublhdxv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#dvjublhdxv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#dvjublhdxv .gt_left {\n  text-align: left;\n}\n\n#dvjublhdxv .gt_center {\n  text-align: center;\n}\n\n#dvjublhdxv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#dvjublhdxv .gt_font_normal {\n  font-weight: normal;\n}\n\n#dvjublhdxv .gt_font_bold {\n  font-weight: bold;\n}\n\n#dvjublhdxv .gt_font_italic {\n  font-style: italic;\n}\n\n#dvjublhdxv .gt_super {\n  font-size: 65%;\n}\n\n#dvjublhdxv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#dvjublhdxv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#dvjublhdxv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#dvjublhdxv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#dvjublhdxv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#dvjublhdxv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#dvjublhdxv .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#dvjublhdxv .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#dvjublhdxv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"KipDaGFyYWN0ZXJpc3RpYyoq\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_1\"><span data-qmd-base64=\"KipmZW1hbGUqKiAgCk4gPSAxNjU=\"><span class='gt_from_md'><strong>female</strong><br />\nN = 165</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_2\"><span data-qmd-base64=\"KiptYWxlKiogIApOID0gMTY4\"><span class='gt_from_md'><strong>male</strong><br />\nN = 168</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">species</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Adelie</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">73 (44%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">73 (43%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Chinstrap</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">34 (21%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">34 (20%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Gentoo</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">58 (35%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">61 (36%)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"3\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> <span data-qmd-base64=\"biAoJSk=\"><span class='gt_from_md'>n (%)</span></span></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n:::\n\nThere are 73 female Adelie penguins, and 61 male Gentoo penguins. \n\n#### Proportions\n\nBy default, when we ask for proportions we get the **cell** proportions. That is, the percent out of _all_ penguins in that data set that have that combination of traits. The percents add up to 1 across the entire table. \n\n::: {.panel-tabset}\n## base R\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$sex) |> prop.table()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           \n               female      male\n  Adelie    0.2192192 0.2192192\n  Chinstrap 0.1021021 0.1021021\n  Gentoo    0.1741742 0.1831832\n```\n\n\n:::\n:::\n\n\n\n\n## `tbl_summary`\n\nNote that `gtsummary` tables tend to round pretty heavily. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl_summary(pen, include = \"species\", by = \"sex\", percent = \"cell\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"pvttublkdv\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#pvttublkdv table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#pvttublkdv thead, #pvttublkdv tbody, #pvttublkdv tfoot, #pvttublkdv tr, #pvttublkdv td, #pvttublkdv th {\n  border-style: none;\n}\n\n#pvttublkdv p {\n  margin: 0;\n  padding: 0;\n}\n\n#pvttublkdv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#pvttublkdv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#pvttublkdv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#pvttublkdv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#pvttublkdv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#pvttublkdv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#pvttublkdv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#pvttublkdv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#pvttublkdv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#pvttublkdv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#pvttublkdv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#pvttublkdv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#pvttublkdv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#pvttublkdv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#pvttublkdv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pvttublkdv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#pvttublkdv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#pvttublkdv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#pvttublkdv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pvttublkdv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#pvttublkdv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pvttublkdv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#pvttublkdv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pvttublkdv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pvttublkdv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pvttublkdv .gt_left {\n  text-align: left;\n}\n\n#pvttublkdv .gt_center {\n  text-align: center;\n}\n\n#pvttublkdv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#pvttublkdv .gt_font_normal {\n  font-weight: normal;\n}\n\n#pvttublkdv .gt_font_bold {\n  font-weight: bold;\n}\n\n#pvttublkdv .gt_font_italic {\n  font-style: italic;\n}\n\n#pvttublkdv .gt_super {\n  font-size: 65%;\n}\n\n#pvttublkdv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#pvttublkdv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#pvttublkdv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#pvttublkdv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#pvttublkdv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#pvttublkdv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#pvttublkdv .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#pvttublkdv .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#pvttublkdv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"KipDaGFyYWN0ZXJpc3RpYyoq\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_1\"><span data-qmd-base64=\"KipmZW1hbGUqKiAgCk4gPSAxNjU=\"><span class='gt_from_md'><strong>female</strong><br />\nN = 165</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_2\"><span data-qmd-base64=\"KiptYWxlKiogIApOID0gMTY4\"><span class='gt_from_md'><strong>male</strong><br />\nN = 168</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">species</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Adelie</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">73 (22%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">73 (22%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Chinstrap</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">34 (10%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">34 (10%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Gentoo</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">58 (17%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">61 (18%)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"3\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> <span data-qmd-base64=\"biAoJSk=\"><span class='gt_from_md'>n (%)</span></span></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n:::\n\n21.9% of all penguins are Adelie females, 18.3% of all penguins are male Gentoo's. \n\n:::{.callout-note title = \"Comparing percentages\"}\nMore often than not, we want to compare percents of one group -- within each level of the other group. For example is the male to female ratio the same for each species? \n:::\n\n#### Row percents {#sec-row-pct-table}\n\nTo compare the distribution of sex (columns) within each of the sepecies (rows) we need row percentages. The percentages now add up to 1 across the rows and the comparison groups are each species. \n \n::: {.panel-tabset}\n## base R\n\nSpecify `margin=1` inside the `prop.table()`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$sex) |> prop.table(margin=1)  |> round(3) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           \n            female  male\n  Adelie     0.500 0.500\n  Chinstrap  0.500 0.500\n  Gentoo     0.487 0.513\n```\n\n\n:::\n:::\n\n\n\n\nI added a `round` function to the end of this because noone needs that many decimal places. \n\n## `tbl_summary`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl_summary(pen, include = \"species\", by = \"sex\", percent = \"row\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"ygwfrxtpnj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ygwfrxtpnj table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ygwfrxtpnj thead, #ygwfrxtpnj tbody, #ygwfrxtpnj tfoot, #ygwfrxtpnj tr, #ygwfrxtpnj td, #ygwfrxtpnj th {\n  border-style: none;\n}\n\n#ygwfrxtpnj p {\n  margin: 0;\n  padding: 0;\n}\n\n#ygwfrxtpnj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ygwfrxtpnj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ygwfrxtpnj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ygwfrxtpnj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ygwfrxtpnj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ygwfrxtpnj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ygwfrxtpnj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ygwfrxtpnj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ygwfrxtpnj .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ygwfrxtpnj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ygwfrxtpnj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ygwfrxtpnj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ygwfrxtpnj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ygwfrxtpnj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ygwfrxtpnj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ygwfrxtpnj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ygwfrxtpnj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ygwfrxtpnj .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ygwfrxtpnj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ygwfrxtpnj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ygwfrxtpnj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ygwfrxtpnj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ygwfrxtpnj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ygwfrxtpnj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ygwfrxtpnj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ygwfrxtpnj .gt_left {\n  text-align: left;\n}\n\n#ygwfrxtpnj .gt_center {\n  text-align: center;\n}\n\n#ygwfrxtpnj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ygwfrxtpnj .gt_font_normal {\n  font-weight: normal;\n}\n\n#ygwfrxtpnj .gt_font_bold {\n  font-weight: bold;\n}\n\n#ygwfrxtpnj .gt_font_italic {\n  font-style: italic;\n}\n\n#ygwfrxtpnj .gt_super {\n  font-size: 65%;\n}\n\n#ygwfrxtpnj .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ygwfrxtpnj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ygwfrxtpnj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ygwfrxtpnj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ygwfrxtpnj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ygwfrxtpnj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ygwfrxtpnj .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#ygwfrxtpnj .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#ygwfrxtpnj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"KipDaGFyYWN0ZXJpc3RpYyoq\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_1\"><span data-qmd-base64=\"KipmZW1hbGUqKiAgCk4gPSAxNjU=\"><span class='gt_from_md'><strong>female</strong><br />\nN = 165</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_2\"><span data-qmd-base64=\"KiptYWxlKiogIApOID0gMTY4\"><span class='gt_from_md'><strong>male</strong><br />\nN = 168</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">species</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Adelie</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">73 (50%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">73 (50%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Chinstrap</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">34 (50%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">34 (50%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Gentoo</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">58 (49%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">61 (51%)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"3\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> <span data-qmd-base64=\"biAoJSk=\"><span class='gt_from_md'>n (%)</span></span></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n:::\n\n50% _of Adelie penguins_ are male, but 51.3% _of Gentoo penguins_ are male. \n\n\n#### Column percents\n\nTo compare the distribution of species (rows) within each of the columns (sex) we need column percentages. The percentages now add up to 1 down the columns and the comparison groups are male and female. \n\n::: {.panel-tabset}\n## base R\n\nSpecify `margin=2` in `prop.table()`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$sex) |> prop.table(margin=2) |> round(3) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           \n            female  male\n  Adelie     0.442 0.435\n  Chinstrap  0.206 0.202\n  Gentoo     0.352 0.363\n```\n\n\n:::\n:::\n\n\n\n\n## `tbl_summary`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl_summary(pen, include = \"species\", by = \"sex\", percent = \"column\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zbwfxqzmva\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zbwfxqzmva table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zbwfxqzmva thead, #zbwfxqzmva tbody, #zbwfxqzmva tfoot, #zbwfxqzmva tr, #zbwfxqzmva td, #zbwfxqzmva th {\n  border-style: none;\n}\n\n#zbwfxqzmva p {\n  margin: 0;\n  padding: 0;\n}\n\n#zbwfxqzmva .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zbwfxqzmva .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zbwfxqzmva .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zbwfxqzmva .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zbwfxqzmva .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zbwfxqzmva .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zbwfxqzmva .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zbwfxqzmva .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zbwfxqzmva .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zbwfxqzmva .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zbwfxqzmva .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zbwfxqzmva .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zbwfxqzmva .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zbwfxqzmva .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zbwfxqzmva .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zbwfxqzmva .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zbwfxqzmva .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zbwfxqzmva .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zbwfxqzmva .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zbwfxqzmva .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zbwfxqzmva .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zbwfxqzmva .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zbwfxqzmva .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zbwfxqzmva .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zbwfxqzmva .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zbwfxqzmva .gt_left {\n  text-align: left;\n}\n\n#zbwfxqzmva .gt_center {\n  text-align: center;\n}\n\n#zbwfxqzmva .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zbwfxqzmva .gt_font_normal {\n  font-weight: normal;\n}\n\n#zbwfxqzmva .gt_font_bold {\n  font-weight: bold;\n}\n\n#zbwfxqzmva .gt_font_italic {\n  font-style: italic;\n}\n\n#zbwfxqzmva .gt_super {\n  font-size: 65%;\n}\n\n#zbwfxqzmva .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zbwfxqzmva .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zbwfxqzmva .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zbwfxqzmva .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zbwfxqzmva .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zbwfxqzmva .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zbwfxqzmva .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#zbwfxqzmva .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#zbwfxqzmva div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"KipDaGFyYWN0ZXJpc3RpYyoq\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_1\"><span data-qmd-base64=\"KipmZW1hbGUqKiAgCk4gPSAxNjU=\"><span class='gt_from_md'><strong>female</strong><br />\nN = 165</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"stat_2\"><span data-qmd-base64=\"KiptYWxlKiogIApOID0gMTY4\"><span class='gt_from_md'><strong>male</strong><br />\nN = 168</span></span><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">species</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Adelie</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">73 (44%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">73 (43%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Chinstrap</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">34 (21%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">34 (20%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†Gentoo</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">58 (35%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">61 (36%)</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"3\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> <span data-qmd-base64=\"biAoJSk=\"><span class='gt_from_md'>n (%)</span></span></td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n:::\n\n44% _of female penguins_ are Adelie species, 36% _of male penguins_ are Gentoo. \n\n\n### Stacked bar charts\n\nSometimes pictures are better than tables, so let's try to apply the same `fill` tactic that we used in the last section. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=species, fill=sex)) + geom_bar()\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-36-1.png){width=672}\n:::\n:::\n\n\n\n\n:::{.callout-important title = \"Stacked barcharts are the ggplot2 default\"}\nStacked barcharts are generally only useful when comparing percents out of a whole. To get the correct view you can add a `position = \"fill\"` argument to the `geom_bar()` layer. \n:::\n\n\n\n\n::: {.cell source-line-numbers='2'}\n\n```{.r .cell-code}\nggplot(pen, aes(x=species, fill=sex)) + \n  geom_bar(position = \"fill\") + \n  ylab(\"Proportion\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-37-1.png){width=672}\n:::\n:::\n\n\n\n\n### Side by side bar charts\n\n::: {.panel-tabset}\n## `ggplot2`\n\nAdd the argument `position=dodge` inside the `geom_bar` layer to put the bars side by side. \n\n\n\n::: {.cell source-line-numbers='2'}\n\n```{.r .cell-code}\nggplot(pen, aes(x=species, fill=sex)) + \n  geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-38-1.png){width=672}\n:::\n:::\n\n\n\n\n## `sjPlot`\n\nThe `plot_xtab` function is the two-way table analogy to `plot_frq` to create a barchart with clear lables on the bars for the N and % (and NA values dropped). Note you have to use dollar sign notation here for the variables. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_xtab(x = pen$species, grp = pen$sex)\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-39-1.png){width=672}\n:::\n:::\n\n\n\n\nBy default this plots the vertical axis as percents, not counts, and it shows the marginal total for the variable that's on the x-axis. We can remove the total by setting `show.total` to `false`. \n\n\n\n\n::: {.cell source-line-numbers='2'}\n\n```{.r .cell-code}\nplot_xtab(x = pen$species, grp = pen$sex, \n          show.total = \"false\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-40-1.png){width=672}\n:::\n:::\n\n\n\n:::\n\nAs before, typically we aren't interested in comparing proportions out of the whole, but proportions out of one of the two margins (variables). \n\n\n### Comparing Percents\n\nOur eyes make comparisons the best when the bars are physically close to each other. So generally you want to put the groups we want to compare _within_ on the x-axis, and have separate bars for each level of the variable we want to compare _across_. \n\nSee each tab on how to compare the distribution of `sex` within each `species`. This corresponds to the **row** percents from @sec-row-pct-table . \n\n::: {.panel-tabset}\n## `ggplot2`\n\nPut `species` on the x-axis and `fill` by `sex`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=species, fill=sex)) + geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-41-1.png){width=672}\n:::\n:::\n\n\n\n\n## `sjPlot`\n\nPut `species` on the x-axis and `grp` by `sex`, and specify `margin = \"row\"`. \n\n\n\n::: {.cell source-line-numbers='2'}\n\n```{.r .cell-code}\nplot_xtab(x = pen$species, grp = pen$sex, show.total = \"false\", \n          margin = \"row\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-42-1.png){width=672}\n:::\n:::\n\n\n\n\n:::\n\n:::{.callout-tip title = \"üëâ Your Turn\" icon=false}\nModify the code above to create a plot to compare the distribution of species within each sex. \n\n<details>\n  <summary> ggplot2 solution </summary>\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(pen, aes(x=sex, fill=species)) + geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-43-1.png){width=672}\n:::\n:::\n\n\n\n</details>\n\n<details>\n  <summary> sjPlot solution </summary>\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_xtab(x = pen$sex, grp = pen$species, show.total = \"false\", margin = \"row\")\n```\n\n::: {.cell-output-display}\n![](plots_files/figure-html/unnamed-chunk-44-1.png){width=672}\n:::\n:::\n\n\n\n</details>\n\n:::\n\n\n\n\n",
    "supporting": [
      "plots_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}